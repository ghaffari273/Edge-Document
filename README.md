# 📌 API Documentation

👋 Hey there! If you've got an account with IPPanel, you're in the right place.
This documentation covers everything you need to know about using our API – from sending messages to managing your
account and beyond.

## 📚 Table of Contents

> Base URL: `http://edge.ippanel.com/v1`

> Please replace `{base_url}` with the actual base URL of the server.

---

## 📚 Table of Contents

- [🔐 Auth](#-auth)
    - [Login API](#login-api)
    - [Send SMS OTP](#send-sms-otp)
    - [Confirm OTP Login](#confirm-otp-login)
    - [Forgot Password](#forgot-password)
        - [Request Otp For Change Password](#request-otp-for-change-password)
        - [Change Password By Token](#change-password-by-token)
    - [Logout](#logout)
    - [Check Token](#check-token)
- [📨 Send](#-send-sms)
    - [Normal](#send-sms-normal)
    - [Webservice](#send-webservice)
    - [Peer To Peer](#send-peer-to-peer)
    - [Peer To Peer By File](#send-peer-to-peer-by-file)
    - [PostalCode](#send-postalcode)
    - [Country](#send-country)
    - [Keyword](#send-keyword)
    - [Keyword By Phonebook](#send-keyword-by-phonebook)
    - [Phonebook](#send-phonebook)
    - [Pattern](#send-pattern)
    - [Send File](#send-file)
    - [VOTP](#send-votp)
    - [Cancel Scheduled Message](#cancel-scheduled-message)
- [📊 Report](#-report)
    - [Report](#outbox-report)
        - [Get Outbox Report](#get-outbox-report)
        - [Get Outbox Report By ID](#get-outbox-report-by-id)
        - [Get Bulk Stats](#get-bulk-stats)
        - [Get Bulk Recipients](#get-bulk-recipients)
        - [Get Inbox Report](#get-inbox-report)
- [📞 Numbers](#-numbers)
    - [Assign Number](#assign-number)
    - [Unassign Number](#unassign-number)
    - [List Numbers](#list-numbers)
- [👤 User](#-user)
    - [Get Parents Tree](#get-parents-tree)
    - [List Users](#list-users)
- [📦 Package](#-package)
    - [List Packages](#list-packages)
- [Tickets](#tickets)
    - [Create Ticket](#create-ticket)
    - [List Tickets](#list-tickets)
    - [Get Ticket By ID](#get-ticket-by-id)
    - [Reply To Ticket](#reply-to-ticket)
- [📝 Draft](#draft)
    - [Create Draft Group](#create-draft-group)
    - [List Draft Groups](#list-draft-groups)
    - [Create Draft](#create-draft)
    - [List Drafts](#list-drafts)
- [💳 Payment](#-payment)
- [Pattern](#pattern)
    - [Create Pattern](#create-pattern)
    - [List Patterns](#list-patterns)
    - [Get Pattern By Code](#get-pattern-by-code)
    - [Update Pattern](#update-pattern)
    - [Delete Pattern](#delete-pattern)
- [📁 Phonebook](#-phonebook)
- [🏦 Bank](#-bank)

> Base URL: `{base_url}`  
(لطفاً `{base_url}` را با آدرس اصلی سرور جایگزین کنید.)

---

# 🔐 Auth

## Login API

Authenticates the user and initiates the login process.

### 📍 Endpoint

POST {base_url}/api/acl/auth/login

### 🧾 Headers

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 Request Body

```json
{
    "username": "your-username",
    "password": "your-password"
}
```

### ✅ Success Response

```
{
  "data": {
    "method": "ga", // or "sms" or "login"
    "token": "84cd3ef65b0700dea4ac7942e61df4a5"
  },
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}

```

📌 Method Values

### 🔄 method Meaning (Login Flow Explanation)

Depending on the user's 2FA (Two-Factor Authentication) settings, one of the following scenarios will occur after a
successful login:

1- **Google Authenticator (ga)**
If the user has enabled Google Authenticator in their profile settings, the response will contain:

```json
{
    "method": "ga"
}
```

✅ The user must call the [Confirm OTP Login](#-confirm-otp-login) API with the 6-digit code generated by the Google
Authenticator app.

2- **SMS OTP (sms)**
If Google Authenticator is not enabled, the system will automatically send an OTP via SMS and the response will contain:

```json
{
    "method": "sms"
}
```

✅ The user must call the [Confirm OTP Login](#-confirm-otp-login) API with the OTP code received via SMS.

⚠️ If the user does not receive the SMS, they can call the [Send SMS OTP](#-send-sms-otp) API to resend the OTP.

3- **No 2FA (login)**
If 2FA is not required for the user, the response will contain:

```json
{
    "method": "login"
}
```

✅ The returned token is final and can be used directly for authenticated API requests. No further action is needed.

⚠️ The temporary token received in the login response:

* _is valid for 6 minutes if method is ga or sms._
* _is valid for 10 hours if method is login._

### ❌ Error Response — Invalid Credentials (401)

```
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

### ❌ Error Response — Validation Error (422)

```
{
  "data": null,
  "meta": {
    "status": false,
    "message": "تکمیل گزینه گذرواژه الزامی است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "password": [
        "تکمیل گزینه گذرواژه الزامی است"
      ]
    }
  }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/login' \
--header 'Content-Type: application/json' \
--data-raw '{
  "username": "your-username",
  "password": "your-password"
}'
```

## Send SMS OTP

This endpoint allows the user to request an OTP (One-Time Password) via SMS, using the token received in the login step.

### 📍 Endpoint

POST {base_url}/api/acl/auth/send_sms_otp

### 🧾 Headers

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 Request Body

```json
{
    "token": "your-login-step-token"
}
```

### ✅ Success Response

```
{
  "data": {
    "method": "sms",
    "token": "e7aff6e9136cc43e9a7c3c3eae5678ac"
  },
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

⚠️ The token used here must be a temporary login token received from the login API.
If valid and not expired, an OTP will be sent via SMS.

### ❌ Error Response — Invalid or Expired Token (401)

```
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/send_sms_otp' \
--header 'Content-Type: application/json' \
--data '{
  "token": "your-login-step-token"
}'
```

## Confirm OTP Login

This endpoint is used to confirm the login process by verifying the OTP (from SMS or Google Authenticator).

### 📍 Endpoint

POST {base_url}/api/acl/auth/confirm_otp

### 🧾 Headers

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 Request Body

```json
{
    "token": "your-temporary-token",
    "otp": "otp-code"
}
```

token: The temporary token received from the Login API

otp: The OTP received via SMS or generated from Google Authenticator

### ✅ Success Response

```
{
  "data": {
    "token": "22c392ffebe7286ee8021cfef7d7cad5",
    "method": "login"
  },
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

🎉 The returned token is the final token that can be used to access authorized APIs.

⏱ Valid for: 10 hours

### ❌ Error Response — Invalid or Expired Token or OTP (401)

```
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

### ❌ Error Response — Validation Error (422)

```
{
  "data": null,
  "meta": {
    "status": false,
    "message": "تکمیل گزینه otp الزامی است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "otp": [
        "تکمیل گزینه otp الزامی است"
      ]
    }
  }
}

```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/confirm_otp' \
--header 'Content-Type: application/json' \
--data '{
  "token": "your-login-step-token",
  "otp": "otp-code"
}'
```

## Forgot Password

### Request Otp For Change Password

This endpoint is used to request an OTP (One-Time Password) for changing the password.

### 📍 Endpoint

POST {base_url}/api/acl/auth/forgot_password

### 🧾 Headers

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 Request Body

```json
{
    "username": "your-username",
    "mobile": "your-mobile-number"
}
```

### ✅ Success Response

```json
{
    "data": {
        "token": "6b1059f512b4fe9acd8bdb22351b0b51"
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه نام کاربری الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "username": [
                "تکمیل گزینه نام کاربری الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/forgot_password' \
--header 'Content-Type: application/json' \
--data '{
    "username":"your-username",
    "mobile":"your-mobile-number"
}'
```

### Change Password By Token

This endpoint is used to change the password using the OTP received in the previous step.

### 📍 Endpoint

POST {base_url}/api/acl/auth/change_password_by_token

### 🧾 Headers

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 Request Body

```json
{
    "token": "token-from-forgot-password",
    "otp": "otp-code",
    "password": "new-password"
}
```

### ✅ Success Response

```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه گذرواژه الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "password": [
                "تکمیل گزینه گذرواژه الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/change_password_by_token' \
--header 'Content-Type: application/json' \
--data '{
    "token":"token-from-forgot-password",
    "otp":"otp-code",
    "password":"new-password"
}'
```

## Logout

This endpoint is used to log out the user from the system.

### 📍 Endpoint

POST {base_url}/api/acl/auth/logout

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/logout' \
--header 'Content-Type: application/json' \
--header 'Authorization: your-token'
```

## Check Token

This endpoint is used to check the validity of the token.

### 📍 Endpoint

POST {base_url}/api/acl/auth/check_token

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": {
        "user_name": "ippanel",
        "user_id": 58745,
        "document_block": false,
        "is_reseller": true,
        "send_block": false,
        "name": "test"
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/acl/auth/check_token' \
--header 'Content-Type: application/json' \
--header 'Authorization: your-token'
```

# 📨 Send Sms

You can send SMS using the following endpoints. The main endpoint is `/api/send`, for changing the sending method, you
can use the sending type parameter in the request body.

## Send Sms Normal

This endpoint is used to quickly send SMS messages.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "normal",
    "from_number": "+983000505",
    "message": "متن پیام",
    "params": {
        "recipients": [
            "+989120000000",
            "+989350000000"
        ]
    },
    "send_time": "2025-03-12 21:20:02"
}
```

in the above request and all another sending types, the `send_time` field is optional and if not provided, the system
will use the current time.if you want to send the message in the future, you can set the `send_time` field to the
desired time in the format `YYYY-MM-DD HH:MM:SS`.timezone is UTC.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123544244
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "normal",
    "from_number": "+983000505",
    "message": "متن پیام",
    "params": {
        "recipients": [
            "+989120000000",
            "+989350000000"
        ]
    },
    "send_time": "2025-03-12 21:20:02"
}'
```

## Send Webservice

This endpoint is used to send SMS messages using a web service.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "webservice",
    "from_number": "+983000505",
    "message": "متن پیام",
    "params": {
        "recipients": [
            "+989120000000",
            "+989350000000"
        ]
    },
    "send_time": "2025-03-12 21:20:02"
}
```

in the above request and all another sending types, the `send_time` field is optional and if not provided, the system
will use the current time.if you want to send the message in the future, you can set the `send_time` field to the
desired time in the format `YYYY-MM-DD HH:MM:SS`.timezone is UTC.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123544244
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "webservice",
    "from_number": "+983000505",
    "message": "متن پیام",
    "params": {
        "recipients": [
            "+989120000000",
            "+989350000000"
        ]
    },
    "send_time": "2025-03-12 21:20:02"
}'
```

## Send Peer To Peer

This API allows you to send multiple messages to multiple recipients in a peer-to-peer format. Each message can have its
own set of recipients.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "peer_to_peer",
    "from_number": "+983000505",
    "params": [
        {
            "recipients": [
                "+989120000000",
                "+989350000000"
            ],
            "message": "پیام اول"
        },
        {
            "recipients": [
                "+989130000000"
            ],
            "message": "پیام دوم"
        }
    ]
}
```

Each item in the params array represents a message and its recipients.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208,
            1123594210
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

The response returns an array of message_outbox_ids – one ID per message sent (regardless of how many recipients it
had).

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "peer_to_peer",
    "from_number": "+983000505",
    "params": [
        {
            "recipients": [
                "+989120000000",
                "+989350000000"
            ],
            "message": "پیام اول"
        },
        {
            "recipients": [
                "+989130000000"
            ],
            "message": "پیام دوم"
        }
    ]
}'
```

## Send Peer To Peer By File

This API allows you to send multiple messages to multiple recipients in a peer-to-peer format using a file. Each message
can have its own set of recipients.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value               |
|---------------|---------------------|
| Content-Type  | multipart/form-data |
| Authorization | your-token          |

### 📤 Request Body

```json
{
    "sending_type": "peer_to_peer_file",
    "from_number": "+983000505",
    "send_time": "2025-03-12 21:20:02",
    "files[]": "file.csv"
}
```

in the above request and all another sending types, the `send_time` field is optional and if not provided, the system
will use the current time.if you want to send the message in the future, you can set the `send_time` field to the
desired time in the format `YYYY-MM-DD HH:MM:SS`.timezone is UTC.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208,
            1123594210
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

The response returns an array of message_outbox_ids – one ID per message sent (regardless of how many recipients it
had).

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه فایل ها الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "files": [
                "تکمیل گزینه فایل ها الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: multipart/form-data' \
--header 'Accept: application/json' \
--form 'sending_type="peer_to_peer_file"' \
--form 'from_number="+983000505"' \
--form 'send_time="2025-04-25 10:10:10"' \
--form 'files[]=@"/path/to/your/file.csv"' \
```

# Send PostalCode

This API allows you to send messages using postal codes.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "postal_code",
    "from_number": "+98BANK",
    "message": "متن پیام",
    "params": [
        {
            "bank": "all",
            "postal_code": 131,
            "gender": 0,
            "age_from": 1330,
            "age_to": 1402,
            "mci": {
                "start": 0,
                "size": 1
            },
            "irancell": {
                "start": 0,
                "size": 0
            },
            "other": {
                "start": 0,
                "size": 0
            }
        },
        {
            "bank": "all",
            "postal_code": 141,
            "gender": 0,
            "age_from": 1330,
            "age_to": 1402,
            "mci": {
                "start": 0,
                "size": 1
            },
            "irancell": {
                "start": 0,
                "size": 0
            },
            "other": {
                "start": 0,
                "size": 0
            }
        }
    ],
    "other_recipients": [
        "+989120000000",
        "+989350000000"
    ],
    "send_time": "2025-02-28 10:52:02"
}
```

in the above request and all another sending types, the `send_time` field is optional and if not provided, the system
will use the current time.if you want to send the message in the future, you can set the `send_time` field to the
desired time in the format `YYYY-MM-DD HH:MM:SS`.timezone is UTC.
in the above request, the `params` field is an array of objects, each representing a postal code and its associated
parameters. The `other_recipients` field is optional and an array of phone numbers that will receive the message in
addition to the postal code recipients.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "postal_code",
    "from_number": "+98BANK",
    "message": "متن پیام",
    "params": [
        {
            "bank": "all",
            "postal_code": 131,
            "gender": 0,
            "age_from": 1330,
            "age_to": 1402,
            "mci": {
                "start": 0,
                "size": 1
            },
            "irancell": {
                "start": 0,
                "size": 0
            },
            "other": {
                "start": 0,
                "size": 0
            }
        },
        {
            "bank": "all",
            "postal_code": 141,
            "gender": 0,
            "age_from": 1330,
            "age_to": 1402,
            "mci": {
                "start": 0,
                "size": 1
            },
            "irancell": {
                "start": 0,
                "size": 0
            },
            "other": {
                "start": 0,
                "size": 0
            }
        }
    ],
    "other_recipients": [
        "+989120000000",
        "+989350000000"
    ],
    "send_time": "2025-02-28 10:52:02"
}'
```

## Send Country
This API allows you to send messages to all numbers in a specific province or county or city.
### 📍 Endpoint
POST {base_url}/api/send
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### 📤 Request Body

```json
{
    "sending_type": "country",
    "from_number": "+98BANK",
    "message": "تست",
    "params": [
        {
            "bank": "all",
            "pre": 938,
            "province_id": 89,
            "county_id": 212,
            "city_id": 82,
            "gender": 0,
            "age_from": 1300,
            "age_to": 1401,
            "mci": {
                "start": 10,
                "size": 100
            },
            "irancell": {
                "start": 1,
                "size": 2
            },
            "other": {
                "start": 2,
                "size": 3
            }
        }
    ],
    "other_recipients": [
        "+989121111111",
        "+989351111111"
    ]
}
```
in the above request, the `params` field is an array of objects, each representing a province or county or city and its
associated parameters. The `other_recipients` field is optional and an array of phone numbers that will receive the
message in addition to the province or county or city recipients.
### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "country",
    "from_number": "+98BANK",
    "message": "تست",
    "params": [
        {
            "bank": "all",
            "pre": 938,
            "province_id": 89,
            "county_id": 212,
            "city_id": 82,
            "gender": 0,
            "age_from": 1300,
            "age_to": 1401,
            "mci": {
                "start": 10,
                "size": 100
            },
            "irancell": {
                "start": 1,
                "size": 2
            },
            "other": {
                "start": 2,
                "size": 3
            }
        }
    ],
    "other_recipients": [
        "+989121111111",
        "+989351111111"
    ]
}`
```
## Send Keyword
This API allows you to send messages using a keyword.
### 📍 Endpoint
POST {base_url}/api/send
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | multipart/form-data |
| Authorization | your-token          |
### 📤 Request Body

```json
{
    "sending_type": "keyword",
    "from_number": "+983000505",
    "message": "سلام {ex_B} م۱ {ex_C}",
    "files[]": "file.xlsx",
    "send_time": "2025-03-12 21:20:02"
}
```
in the above request, the `files[]` field is an array of files containing phone numbers. The `send_time` field is optional and if not provided, the system will use the current time. If you want to send the message in the future, you can set the `send_time` field to the desired time in the format `YYYY-MM-DD HH:MM:SS`. Timezone is UTC.
### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه فایل ها الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "files": [
                "تکمیل گزینه فایل ها الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: multipart/form-data' \
--header 'Accept: application/json' \
--header 'Authorization: API TOKEN' \
--form 'sending_type="keyword"' \
--form 'from_number="+983000505"' \
--form 'message="سلام {ex_B} م۱ {ex_C}"' \
--form 'send_time="2025-04-25 10:10:10"' \
--form 'files[]=@"/path/to/your/file.xlsx"'
```

## Keyword By Phonebook
This API allows you to send messages using a keyword to a phonebook.
### 📍 Endpoint
POST {base_url}/api/send
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### 📤 Request Body

```json
{
    "sending_type": "keyword_phonebook",
    "from_number": "+983000505",
    "message": "تاریخ {ex_50856}\nبدهی {ex_50858}",
    "send_time": "2025-03-25 10:10:10",
    "params": [
        {
            "phonebook_id": 123654
        }
    ]
}
```
in the above request, the `params` field is an array of objects, each representing a phonebook and its associated parameters. The `send_time` field is optional and if not provided, the system will use the current time. If you want to send the message in the future, you can set the `send_time` field to the desired time in the format `YYYY-MM-DD HH:MM:SS`. Timezone is UTC.
### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "keyword_phonebook",
    "from_number": "+983000505",
    "message": "تاریخ {ex_50856}\nبدهی {ex_50858}",
    "send_time": "2025-03-25 10:10:10",
    "params": [
        {
            "phonebook_id": 123654
        }
    ]
}'
```

## Send Phonebook
This API allows you to send messages to one or more phonebooks.
### 📍 Endpoint
POST {base_url}/api/send
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### 📤 Request Body

```json
{
    "sending_type": "phonebook",
    "from_number": "+983000505",
    "message": "تست",
    "params": [
        {
            "phonebook_ids": [
                "123654"
            ],
            "type": "all",
            "start": "1",
            "size": "2"
        },
        {
            "phonebook_id": "456987",
            "type": "detail",
            "number_ids": [
                "123",
                "456",
                "789"
            ]
        }
    ]
}
```
in the above request, the `params` field is an array of objects, each representing a phonebook and its associated parameters. The `type` field can be `all` or `detail`. If the type is `all`, the `phonebook_ids` field is an array of phonebook IDs. If the type is `detail`, the `phonebook_id` field is a single phonebook ID and the `number_ids` field is an array of phone numbers to send the message to.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "phonebook",
    "from_number": "+983000505",
    "message": "تست",
    "params": [
        {
            "phonebook_ids": [
                "123654"
            ],
            "type": "all",
            "start": "1",
            "size": "2"
        },
        {
            "phonebook_id": "456987",
            "type": "detail",
            "number_ids": [
                "123",
                "456",
                "789"
            ]
        }
    ]
}'
```


## Send Pattern

This API allows you to send messages using a pattern.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "pattern",
    "from_number": "+983000505",
    "code": "xxxxxxxxxxxxxxx",
    "recipients": [
        "+989120000000"
    ],
    "params": {
        "code": "متن جایگذاری"
    }
}
```

in the above request, the `params` field is an object representing the pattern and its associated parameters.

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه code الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "code": [
                "تکمیل گزینه code الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "pattern",
    "from_number": "+983000505",
    "code": "xxxxxxxxxxxxxxx",
    "recipients": [
        "+989120000000"
    ],
    "params": {
        "code": "متن جایگذاری"
    }
}'
```

## Send File
This API allows you to send messages using a file containing phone numbers.
### 📍 Endpoint
POST {base_url}/api/send
### 🧾 Headers
| Key           | Value               |
|---------------|---------------------|
| Content-Type  | multipart/form-data |
| Authorization | your-token          |
### 📤 Request Body

```json
{
    "sending_type": "file",
    "from_number": "+983000505",
    "message": "متن پیام",
    "files[]": "file.csv",
    "send_time": "2025-03-12 21:20:02",
    "other_recipients": [
        "+989120000000",
        "+989350000000"
    ]
}
```
in the above request, the `files[]` field is an array of files containing phone numbers. The `send_time` field is optional and if not provided, the system will use the current time. If you want to send the message in the future, you can set the `send_time` field to the desired time in the format `YYYY-MM-DD HH:MM:SS`. Timezone is UTC. The `other_recipients` field is optional and an array of phone numbers that will receive the message in addition to the file recipients.
### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه فایل ها الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "files": [
                "تکمیل گزینه فایل ها الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: multipart/form-data' \
--header 'Accept: application/json' \
--form 'sending_type="file"' \
--form 'from_number="+983000505"' \
--form 'message="متن پیام"' \
--form 'files[]=@"/path/to/your/file.csv"' \
--form 'send_time="2025-03-12 21:20:02"' \
--form 'other_recipients[]="+989120000000"' \
--form 'other_recipients[]="+989350000000"'
```

## Send VOTP

This API allows you to send a VOTP (Voice One-Time Password) message.

### 📍 Endpoint

POST {base_url}/api/send

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "sending_type": "votp",
    "message": "45852",
    "params": {
        "recipients": [
            "+989120000000"
        ]
    }
}
```

### ✅ Success Response

```json
{
    "data": {
        "message_outbox_ids": [
            1123594208
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه پیام الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message": [
                "تکمیل گزینه پیام الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "sending_type": "votp",
    "message": "45852",
    "params": {
        "recipients": [
            "+989120000000"
        ]
    }
}'
```

## Cancel Scheduled Message

Use this API to cancel a message scheduled for future delivery.
Note: You can only cancel messages at least 5 minutes before their scheduled send time.

### 📍 Endpoint

POST {base_url}/api/send/cancel

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "message_outbox_id": 1148303263
}
```

### ✅ Success Response

```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (404)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "پیام مورد نظر یافت نشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه message outbox id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "message_outbox_id": [
                "تکمیل گزینه message outbox id الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/send/cancel' \
--header 'Content-Type: application/json' \
--header 'Authorization: API TOKEN' \
--data '{
    "message_outbox_id":1148303263
}'
```

# 📊 Report

This API allows you to get various reports related to your activities.

## Outbox Report

This API allows you to get reports of sent messages.

### Get Outbox Report

With this API, you can retrieve a general report of your SMS sending requests.
It provides information about sent bulk messages but does not include individual message details.
To access message-level data, please refer to the detailed APIs described later in this documentation.You can use the
`page` and `limit` parameters to paginate through the results.

### 📍 Endpoint

POST {base_url}/api/report/new_list

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "page": 1,
    "limit": 10,
    "filters": {
        "username": "*",
        "number": "+98217000070",
        "messages_outbox_id": "1100972179",
        "create_from_date": "1744102007",
        "create_to_date": "1744102007",
        "send_from_date": "1744102007",
        "send_to_date": "1744102007",
        "from_exit_count": 1,
        "to_exit_count": 100,
        "message": "تست",
        "state_id": "6"
    }
}
```

All fields in the `filters` object are optional. You can use any combination of them to filter your results.
Some filter fields only accept specific predefined values.
Below, you’ll find the list of allowed values for each field, along with a brief explanation of what each value means.

- `state_id`:
    - `0`: The message is in the process of create.
    - `1`: The message create successfully and is in the monitoring queue.
    - `2`: The message is in the process of sending.
    - `3`: The message rejected by the monitoring system.
    - `4`: The recipients of this message were either entered incorrectly or are not valid.
    - `5`: The message is in send queue.
    - `6`: The message was sent successfully.
    - `7`: The message sending has been canceled.
    - `8`: Insufficient credit for sending.
    - `9`: The message was not sent due to a system error.

### ✅ Success Response

```json
{
    "data": [
        {
            "username": "*****",
            "number_color": "#95E871",
            "number": "+981000",
            "number_id": "123654",
            "messages_outbox_id": "12545856",
            "state": "finish",
            "type": "pattern_transactional",
            "time_send": "1745409418",
            "time": "1745409418",
            "rcpts_count": "1",
            "exit_count": "1",
            "status": "پایان یافته",
            "partner_id": null,
            "in_delivery_line": 0,
            "valid": "approve",
            "message": "متن پیام",
            "part": null,
            "cost": 3990.2,
            "summary": null,
            "user_ip": null,
            "user_id": null,
            "files_path": null,
            "parent_id": null,
            "state_id": 6
        },
        {
            "username": "******",
            "number_color": "#95E871",
            "number": "+981000",
            "number_id": "1236587",
            "messages_outbox_id": "588459562",
            "state": "finish",
            "type": "pattern",
            "time_send": "1745409418",
            "time": "1745409418",
            "rcpts_count": "1",
            "exit_count": "1",
            "status": "پایان یافته",
            "partner_id": null,
            "in_delivery_line": 0,
            "valid": "approve",
            "message": "متن پیام",
            "part": null,
            "cost": 6144.9,
            "summary": null,
            "user_ip": null,
            "user_id": null,
            "files_path": null,
            "parent_id": null,
            "state_id": 6
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 32282040,
        "path": "/api/report/new_list",
        "per_page": 2,
        "to": 2,
        "total": 64564080,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "invalid state",
        "message_parameters": [],
        "message_code": "400-31",
        "errors": {}
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/report/new_list' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data '{
    "page": 1,
    "limit": 10,
    "filters": {
        "username": "*",
        "number": "+98217000070",
        "messages_outbox_id": "1100972179",
        "create_from_date": "1744102007",
        "create_to_date": "1744102007",
        "send_from_date": "1744102007",
        "send_to_date": "1744102007",
        "from_exit_count": 1,
        "to_exit_count": 100,
        "message": "تست",
        "state_id":"6"
    }
}'
```

## Get Outbox Report By ID

This API allows you to get a detailed report of a specific sent message using its ID.

### 📍 Endpoint

GET {base_url}/api/report/by_bulk?messages_outbox_id={messages_outbox_id}

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "page": 1,
    "limit": 10
}
```

### ✅ Success Response

```json
{
    "data": {
        "username": "*****",
        "number_color": null,
        "number": "+98votp",
        "number_id": "154845",
        "messages_outbox_id": "5544778899",
        "state": "finish",
        "type": "sendvoice",
        "time_send": "1744121368",
        "time": "1744121368",
        "rcpts_count": "1",
        "exit_count": "1",
        "status": "پایان یافته",
        "return": 0,
        "partner_id": null,
        "in_delivery_line": 0,
        "valid": null,
        "message": "1234",
        "part": "1",
        "cost": 1064,
        "summary": "ارسال کد فعالسازی صوتی : 1234",
        "user_ip": "1.1.0.1",
        "user_id": "99885544",
        "reject_comment": null,
        "files_path": "1/send/SZiasdasdasdgghgf.wav",
        "parent_id": "98554",
        "state_id": 6
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### 🧪 Example using curl

```
curl --location --request GET '{base_url}/api/report/by_bulk?messages_outbox_id={messages_outbox_id}' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

# Get Bulk Stats

This API allows you to get statistics about your sent messages.

### 📍 Endpoint

GET {base_url}/api/report/bulk_stats?bulk_id={messages_outbox_id}

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": {
        "operators_blacklist": {
            "irancell": {
                "en": 0,
                "fa": 0
            },
            "mci": {
                "en": 0,
                "fa": 0
            }
        },
        "operators_failed": {
            "irancell": {
                "en": 0,
                "fa": 0
            },
            "mci": {
                "en": 0,
                "fa": 0
            }
        },
        "operators_pending": {
            "irancell": {
                "en": 0,
                "fa": 0
            },
            "mci": {
                "en": 0,
                "fa": 0
            }
        },
        "operators_sent": {
            "irancell": {
                "en": 0,
                "fa": 0
            },
            "mci": {
                "en": 0,
                "fa": 0
            }
        },
        "operators_delivered": {
            "irancell": {
                "en": 0,
                "fa": "1"
            },
            "mci": {
                "en": 0,
                "fa": 0
            }
        }
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه bulk_id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "bulk_id": [
                "تکمیل گزینه bulk_id الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/report/bulk_stats?bulk_id={messages_outbox_id}' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

# Get Bulk Recipients

This API allows you to get the recipients of a specific sent message using its ID.
If the message status is finalized, the delivery status for each recipient will also be returned.

### 📍 Endpoint

GET {base_url}/api/report/recipients?page=1&per_page=10&bulk_id={messages_outbox_id}

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": [
        {
            "recipient": "+989190000000",
            "message": "متن پیام",
            "is_readable": true,
            "msg_parts": "1",
            "message_status": "1"
        },
        {
            "recipient": "+989120000000",
            "message": "با سلام",
            "is_readable": true,
            "msg_parts": "1",
            "message_status": "1"
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "path": "/api/report/recipients",
        "per_page": 10,
        "to": 2,
        "total": 2,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```

`message_status` field can have the following values:

- `0`: Sent to the operator
- `1`: Operator received the message
- `2`: Message delivered to the recipient
- `3`: Message not delivered to the recipient
- `4`: Blacklisted number

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه bulk_id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "bulk_id": [
                "تکمیل گزینه bulk_id الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/report/recipients?page=1&per_page=10&bulk_id={messages_outbox_id}' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```
# Get Inbox Report
This API allows you to get reports of received messages.
If you want to get new received messages, you can use the `from_id` parameter in the request body.
This parameter is the ID of the last message you received. The API will return all messages received after this ID.
You can use the `page` and `per_page` parameters to paginate through the results.
### 📍 Endpoint
POST {base_url}/api/report/messages-inbox
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### 📤 Request Body
```json
{
    "page": 1,
    "per_page": 10,
    "filters" : {
        "from_id":125
    }
}
```
### ✅ Success Response
```json
{
    "data": [
        {
            "messages_inbox_id": 123,
            "from": "+989122222222",
            "number": "+981000123",
            "message": "message text",
            "type": "normal",
            "time": 1747808125,
            "seen": "0"
        },
        {
            "messages_inbox_id": 122,
            "from": "+989122222222",
            "number": "+981000123",
            "message": "message text",
            "type": "normal",
            "time": 1747808120,
            "seen": "0"
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 4066539,
        "path": "https://baseurl/api/report/messages-inbox",
        "per_page": 2,
        "to": 1,
        "total": 4066539,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/report/messages-inbox' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data '{
    "page": 1,
    "per_page": 10,
    "filters" : {
        "from_id":125
    }
}'
```


# 📞 Numbers

With these endpoints, you can view and manage the lines that belong to you. If you are a reseller, you can also use
these endpoints to manage the lines of your users, such as assigning a line to a user or reclaiming a line from a user.

## Assign Number

This API allows you to assign a number to a user.

### 📍 Endpoint

POST {base_url}/api/numbers/assign

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "number_id": 10,
    "target_user_id": 123,
    "number": "+983000505",
    "target_user": "testuser",
    "send": true,
    "gets": false
}
```

API Request Parameters

`number_id`      `integer`  Conditional, ID of the phone number to assign to the user. Required if `number` is not
provided.

`target_user_id` `integer`  Conditional, ID of the target user. Required if `target_user` is not provided.

`number`         `string`   Conditional, The phone number to assign. Required if `number_id` is not provided.

`target_user`   `string`   Conditional, Username of the target user. Required if `target_user_id` is not provided.

`send`           `boolean`  Required, If `true`, the user will be allowed to send messages using this number.

`gets`            `boolean`  Required, If `true`, the user will be able to receive/view incoming messages for this
number. Typically `true` for dedicated numbers.

✅ Note: You must provide at least one of each of the following pairs:

`number_id` or `number`

`target_user_id` or `target_user`

### ✅ Success Response

```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (400)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "number already assigned to user",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه number id الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "number_id": [
                "تکمیل گزینه number id الزامی است"
            ],
            "number": [
                "تکمیل گزینه number الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/numbers/assign' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data '{
    "number_id": 10,
    "target_user_id": 123,
    "number": "+983000505",
    "target_user": "testuser",
    "send": true,
    "gets": false
}'
```

## Unassign Number

This API allows you to unassign a number from a user.

### 📍 Endpoint

POST {base_url}/api/numbers/unassign

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### 📤 Request Body

```json
{
    "number_id": 10,
    "target_user_id": 123,
    "number": "+983000505",
    "target_user": "testuser"
}
```

API Request Parameters

`number_id`      `integer`  Conditional, ID of the phone number to unassign from the user. Required if `number` is not
provided.

`target_user_id` `integer`  Conditional, ID of the target user. Required if `target_user` is not provided.

`number`         `string`   Conditional, The phone number to unassign. Required if `number_id` is not provided.

`target_user`   `string`   Conditional, Username of the target user. Required if `target_user_id` is not provided.

✅ Note: You must provide at least one of each of the following pairs:

`number_id` or `number`

`target_user_id` or `target_user`

### ✅ Success Response

```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (400)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "number not assigned to user",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه number id الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "number_id": [
                "تکمیل گزینه number id الزامی است"
            ],
            "number": [
                "تکمیل گزینه number الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/numbers/unassign' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data '{
    "number_id": 10,
    "target_user_id": 123,
    "number": "+983000505",
    "target_user": "testuser"
}'
```
## List Numbers
This API allows you to list all numbers that belong to users.
### 📍 Endpoint
GET {base_url}/api/numbers?page=1&per_page=10
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": [
        {
            "id": 10001,
            "number": "+981234567890",
            "operator_id": 1,
            "alias": null,
            "gets": 0,
            "is_66_char": 0
        },
        {
            "id": 10002,
            "number": "+981234567891",
            "operator_id": 2,
            "alias": "Sample Alias",
            "gets": 0,
            "is_66_char": 0
        },
        {
            "id": 10003,
            "number": "+981234567892",
            "operator_id": 3,
            "alias": null,
            "gets": 0,
            "is_66_char": 0
        },
        {
            "id": 10004,
            "number": "+981234567893",
            "operator_id": 4,
            "alias": null,
            "gets": 0,
            "is_66_char": 0
        },
        {
            "id": 10005,
            "number": "+981234567894",
            "operator_id": 5,
            "alias": null,
            "gets": 0,
            "is_66_char": 0
        }
    ],
    "meta": {
        "status": true,
        "message": "Success",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### 🧪 Example using curl
```
curl --location '{base_url}/api/numbers?page=1&per_page=10' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```


# 👤 User

This module is available only to **resellers**. Normal users do not need or have access to this module.

It allows resellers to manage and query information related to their downstream users.

---

## Get Parents Tree

Returns the full hierarchy (reseller tree) of a specific user.

### 📍 Endpoint

GET {base_url}/api/user/parents_tree?user_id={user_id}

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### ✅ Success Response

```json
{
    "data": {
        "selected_user": {
            "id": 123,
            "username": "user",
            "is_reseller": true
        },
        "main_parent": {
            "id": 584,
            "username": "mainparent",
            "is_reseller": true
        },
        "tree": [
            {
                "id": 1,
                "username": "ippanel",
                "is_reseller": "yes"
            },
            {
                "id": 464,
                "username": "res1",
                "is_reseller": "yes"
            },
            {
                "id": 8555,
                "username": "res2",
                "is_reseller": "yes"
            },
            {
                "id": 98798,
                "username": "res3",
                "is_reseller": "yes"
            }
        ]
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### ❌ Error Response — Validation Error (422)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه user id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "user_id": [
                "تکمیل گزینه user id الزامی است"
            ]
        }
    }
}
```

### 🧪 Example using curl

```
curl --location '{base_url}/api/user/parents_tree?user_id={user_id}' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

## List Users

This API allows you to list all users under your reseller account.
You can use the `page` and `per_page` parameters to paginate through the results.

### 📍 Endpoint

GET {base_url}/api/user/list?page=1&per_page=10

### 🧾 Headers

| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### Filters Parameters

| Key          | Type     | Description                                                                                                                                                                                                                  |
|--------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `username`   | `string` | *(Optional)* Username of the user.                                                                                                                                                                                           |
| `name`       | `string` | *(Optional)* Name of the user.                                                                                                                                                                                               |
| `add_status` | `string` | *(Optional)* Create status of the user. Can get one or this status:`normal`,`online`,`webservice`                                                                                                                            |
| `national_id` | `string` | *(Optional)* National Code of the user.                                                                                                                                                                                      |
| `acl_role_id` | `string` | *(Optional)* Package ID of the user.                                                                                                                                                                                         |
| `tell`       | `string` | *(Optional)* Phone number of the user.                                                                                                                                                                                       |
| `mobile`     | `string` | *(Optional)* Mobile number of the user.                                                                                                                                                                                      |
| `is_reseller` | `string` | *(Optional)* Reseller status of the user. Can get one or this status:`yes`,`no`                                                                                                                                              |
| `document_block` | `string` | *(Optional)* Document block status of the user. Can get one or this status:`yes`,`no`                                                                                                                                        |
| `created_from` | `integer` | *(Optional)* The timestamp indicating when the user was created, in UTC format.                                                                                                                                              |
| `created_to` | `integer` | *(Optional)* The timestamp indicating when the user was created, in UTC format.                                                                                                                                              |
| `expire_from` | `integer` | *(Optional)* The timestamp indicating when the user will expire, in UTC format.                                                                                                                                              |
| `expire_to`  | `integer` | *(Optional)* The timestamp indicating when the user will expire, in UTC format.                                                                                                                                              |
| `is_bought_panel` | `string` | *(Optional)* Indicates whether the user has purchased a panel. Can get one or this status:`1`,`0`                                                                                                                            |
| `login_status` | `integer` | *(Optional)* Indicates whether the user is logged in. Can get one status:`0` and mean never login                                                                                                                            |
| `sub_reseller` | `integer` | *(Optional)* Accepts either `0` or `1`. `0` indicates that the user is a direct sub-reseller and `1` indicates that the user is an indirect sub-reseller (i.e., part of the downline but not directly under the requester). If omitted, all users (both direct and indirect) will be returned |

⚠️ Important: To exclude a filter from the query, do not include it at all in the request. Avoid sending it with an empty string or `null` value.

### ✅ Success Response

```json
{
    "data": [
        {
            "status": "active",
            "time": 1747570721,
            "uname": "user1",
            "document_block": "yes",
            "special_disc": 0,
            "parent": 123654,
            "user_id": 123654,
            "accounting_id": null,
            "is_reseller": "yes",
            "name": "name and family",
            "national_id": "1587459321",
            "certificate_id": "1587459321",
            "tell": null,
            "mobile": "+989122222222",
            "address": "adress",
            "company": "test",
            "postalcode": 4758896654,
            "send_block": "yes",
            "email": "",
            "add_status": "webservice",
            "acl_role_id": 123,
            "last_login": 1747573019,
            "confirm": "0",
            "user_create": "no",
            "show_status": "active",
            "expire_time": null,
            "user_description": null,
            "description": null,
            "is_bought_panel": "1",
            "main_parent": "main_parent_name",
            "credit": {
                "credit": 0,
                "user_id": 123654
            },
            "acl_role": {
                "acl_role_id": 123,
                "acl_role_name": "package_name"
            }
        },
        {
            "status": "active",
            "time": 1747570721,
            "uname": "user1",
            "document_block": "yes",
            "special_disc": 0,
            "parent": 123654,
            "user_id": 123654,
            "accounting_id": null,
            "is_reseller": "yes",
            "name": "name and family",
            "national_id": "1587459321",
            "certificate_id": "1587459321",
            "tell": null,
            "mobile": "+989122222222",
            "address": "adress",
            "company": "test",
            "postalcode": 4758896654,
            "send_block": "yes",
            "email": "",
            "add_status": "webservice",
            "acl_role_id": 123,
            "last_login": 1747573019,
            "confirm": "0",
            "user_create": "no",
            "show_status": "active",
            "expire_time": null,
            "user_description": null,
            "description": null,
            "is_bought_panel": "1",
            "main_parent": "main_parent_name",
            "credit": {
                "credit": 0,
                "user_id": 123654
            },
            "acl_role": {
                "acl_role_id": 123,
                "acl_role_name": "package_name"
            }
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 46,
        "path": "https://baseurl/api/user/list",
        "per_page": 1,
        "to": 1,
        "total": 46,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)

```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl

```
curl --location '{base_url}/api/user/list?page=1&per_page=10' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```
# 📦 Package
With these endpoints, you can view and manage the packages(ACL Roles) that belong to you. If you are a reseller, you can also use
This module is available only to **resellers**. Normal users do not need or have access to this module.
these endpoints to manage the packages of your users, such as assigning a package to a user or reclaiming a package from a user.
## List Packages
This API allows you to list all packages (ACL Roles) under your reseller account.
You can use the `page` and `per_page` parameters to paginate through the results.
### 📍 Endpoint
GET {base_url}/api/acl/package/list?page=1&per_page=10
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Request Body
```json
{
    "page": 1,
    "per_page": 10
}
```
### ✅ Success Response
```json
{
    "data": [
        {
            "acl_role_id": 123,
            "acl_role_parent_id": 1,
            "acl_role_name": "package name",
            "price": 2000000,
            "special_disc": 20,
            "min_sms_charge": 0,
            "time": 1740216700,
            "user_id": 123,
            "type": "normal",
            "acl_type": "user",
            "status": "active",
            "priority": null,
            "expire_time": null,
            "acl_role_type_registration": "online",
            "is_transferred": "0",
            "election": "0",
            "updated_at": "2025-02-22 09:31:40",
            "updated_at_man": null
        },
        {
            "acl_role_id": 123,
            "acl_role_parent_id": 1,
            "acl_role_name": "package name",
            "price": 2000000,
            "special_disc": 20,
            "min_sms_charge": 0,
            "time": 1740216700,
            "user_id": 123,
            "type": "normal",
            "acl_type": "user",
            "status": "active",
            "priority": null,
            "expire_time": null,
            "acl_role_type_registration": "online",
            "is_transferred": "0",
            "election": "0",
            "updated_at": "2025-02-22 09:31:40",
            "updated_at_man": null
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 62,
        "path": "https://baseurl/api/acl/package/list",
        "per_page": 2,
        "to": 1,
        "total": 62,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/acl/package/list?page=1&per_page=10' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

# Tickets
This module is available only to **resellers**. Normal users do not need or have access to this module.

## Create Ticket
This API allows you to create a new ticket.
### 📍 Endpoint
POST {base_url}/api/ticket
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  |  multipart/form-data |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "subject": "عنوان تیکت",
    "category_id": "123",
    "description": "متن تیکت",
    "sms_notification": "1",
    "file": "file1.zip"
}
```
### Request Parameters
| Key         | Type     | Description                                                                                                                                                            |
|-------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `subject`   | `string` | Required, The subject of the ticket.                                                                                                                                   |
| `category_id` | `string` | Required, The ID of the category to which the ticket belongs.                                                                                                          |
| `description` | `string` | Required, The content of the ticket.                                                                                                                                   |
| `sms_notification` | `string` | Optional, If set to `1`, the user will receive an SMS notification when the ticket is updated. Default is `0`.                                                         |
| `file`      | `file`   | Optional, You can attach file to the ticket. The file should be in `multipart/form-data` format and can be a zip file or jpg/png type. The maximum file size is 10 MB. |
### ✅ Success Response
```json
{
    "data": {
        "ticket_id": 123456
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه subject الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "subject": [
                "تکمیل گزینه subject الزامی است"
            ],
            "category_id": [
                "تکمیل گزینه category_id الزامی است"
            ],
            "description": [
                "تکمیل گزینه description الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/ticket' \
--header 'Content-Type: multipart/form-data' \
--header 'Authorization: Your Apikey/Token' \
--form 'subject="عنوان تیکت"' \
--form 'category_id="123"' \
--form 'description="متن تیکت"' \
--form 'sms_notification="1"' \
--form 'file=@"/path/to/your/file.zip"'
```
## List Tickets
This API allows you to list all tickets under your reseller account.
You can use the `page` and `per_page` parameters to paginate through the results.
### 📍 Endpoint
GET {base_url}/api/ticket?page=1&per_page=10
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Filters Parameters
| Key          | Type     | Description                                                                                                                                                                                                                  |
|--------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `username`   | `string` | *(Optional)* Username of the user who created the ticket.                                                                                                                                                                     |
| `ticket_id` | `string` | *(Optional)* ID of the ticket.                                                                                                                                                                                               |
| `category_id` | `string` | *(Optional)* ID of the category to which the ticket belongs.                                                                                                                                                                  |
| `sub_category_id` | `string` | *(Optional)* ID of the sub-category to which the ticket belongs.                                                                                                                                                              |
| `state_id` | `string` | *(Optional)* ID of the state of the ticket.                                                                                                                                                                                   |

`state_id` can have the following values:
- `1`: Waiting for response
- `2`: Waiting for support
- `3`: Answered
- `4`: Closed
- `5`: Forwarded to another department

⚠️ Important: To exclude a filter from the query, do not include it at all in the request. Avoid sending it with an empty string or `null` value.
### ✅ Success Response
```json
{
    "data": [
        {
            "id": 100001,
            "ticket_id": 100001,
            "user_id": 200001,
            "parent_id": 300001,
            "category_id": 10,
            "sub_category_id": 20,
            "importance": "acute",
            "state_id": 3,
            "subject": "Sample ticket with file",
            "desc": "Sample description for file upload",
            "manager_comment": null,
            "close_desc": null,
            "admin_seen": 1,
            "user_seen": 1,
            "sms_notification": 0,
            "interaction_count": 1,
            "longest_interaction": 0,
            "min_rate": null,
            "deleted_at": null,
            "created_at": "2025-01-01T10:00:00.000000Z",
            "updated_at": "2025-01-01T11:00:00.000000Z",
            "jira_id": 40001,
            "rate": 0,
            "rate_comment": null,
            "user": {
                "user_id": 200001,
                "uname": "sampleuser"
            },
            "category": {
                "id": 10,
                "name": "Plugins, Domains, API"
            },
            "sub_category": {
                "id": 20,
                "title": "System Errors"
            },
            "state": {
                "id": 3,
                "name": "replied"
            },
            "forward": {
                "id": 500001,
                "from": 200001,
                "ticket_id": 100001,
                "to": 1,
                "created_at": "2025-01-01T10:00:00.000000Z",
                "updated_at": "2025-01-01T10:10:00.000000Z",
                "deleted_at": null,
                "seen": 1
            }
        },
        {
            "id": 100002,
            "ticket_id": 100002,
            "user_id": 200001,
            "parent_id": 300001,
            "category_id": 11,
            "sub_category_id": 21,
            "importance": "acute",
            "state_id": 3,
            "subject": "Sample ticket",
            "desc": "Sample ticket description",
            "manager_comment": null,
            "close_desc": null,
            "admin_seen": 1,
            "user_seen": 0,
            "sms_notification": 0,
            "interaction_count": 1,
            "longest_interaction": 1234,
            "min_rate": null,
            "deleted_at": null,
            "created_at": "2025-01-02T08:00:00.000000Z",
            "updated_at": "2025-01-02T09:00:00.000000Z",
            "jira_id": 40002,
            "rate": 0,
            "rate_comment": null,
            "user": {
                "user_id": 200001,
                "uname": "sampleuser"
            },
            "category": {
                "id": 11,
                "name": "System Questions"
            },
            "sub_category": {
                "id": 21,
                "title": "Other Issues"
            },
            "state": {
                "id": 3,
                "name": "replied"
            },
            "forward": {
                "id": 500002,
                "from": 200001,
                "ticket_id": 100002,
                "to": 1,
                "created_at": "2025-01-02T08:00:00.000000Z",
                "updated_at": "2025-01-02T08:00:00.000000Z",
                "deleted_at": null,
                "seen": 0
            }
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 15,
        "per_page": 2,
        "to": 2,
        "total": 30,
        "status": true,
        "message": "Success",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/ticket?page=1&per_page=10' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

### Get Ticket By ID
This API allows you to get a specific ticket by its ID.
### 📍 Endpoint
GET {base_url}/api/ticket/show?ticket_id={ticket_id}
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |

### Request Parameters
| Key          | Type     | Description                                                                                                                                                                                                                  |
|--------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `ticket_id`  | `string` | Required, The ID of the ticket you want to retrieve.                                                                                                                                                                         |

### ✅ Success Response
```json
{
    "data": {
        "id": 100001,
        "ticket_id": 100001,
        "user_id": 200001,
        "parent_id": 300001,
        "importance": "acute",
        "subject": "Sample ticket with file",
        "category": "Plugins, Domains, API",
        "category_id": 10,
        "sub_category_id": 20,
        "state": "replied",
        "state_id": 3,
        "sub_state_id": null,
        "description": "Sample description for file upload",
        "close_desc": null,
        "user_seen": 1,
        "sms_notification": 0,
        "created_at": "2025-01-01 10:00:00",
        "attachment": "https://storage.example.com/sampleuser/ticket/samplefile.zip",
        "interactions": [
            {
                "id": 400001,
                "description": "Sample reply",
                "agent_id": 200001,
                "agent_username": "sampleagent",
                "created_at": "2025-01-01 10:10:00",
                "attachment": "https://storage.example.com/sampleuser/ticket/sample-reply.zip",
                "partner_title": "sampleagent",
                "private": 0,
                "username": "sampleagent"
            }
        ],
        "forward": {
            "id": 500001,
            "from": 200001,
            "ticket_id": 100001,
            "to": 1,
            "created_at": "2025-01-01T10:00:00.000000Z",
            "updated_at": "2025-01-01T10:10:00.000000Z",
            "deleted_at": null,
            "seen": true
        },
        "manager_comment": "",
        "jira_id": 40001,
        "rate": 0
    },
    "meta": {
        "status": true,
        "message": "Success",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه ticket id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "ticket_id": [
                "تکمیل گزینه ticket id الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/ticket/show?ticket_id={ticket_id}' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

## Reply To Ticket
This API allows you to reply to a specific ticket.
### 📍 Endpoint
POST {base_url}/api/ticket/interaction
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  |  multipart/form-data |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "ticket_id": 100001,
    "description": "Sample reply",
    "file": "file1.zip"
}
```
### Request Parameters
| Key          | Type     | Description                                                                                                                                                            |
|--------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `ticket_id`  | `string` | Required, The ID of the ticket you want to reply to.                                                                                                                    |
| `description` | `string` | Required, The content of your reply.                                                                                                                                   |
| `file`       | `file`   | Optional, You can attach a file to your reply. The file should be in `multipart/form-data` format and can be a zip file or jpg/png type. The maximum file size is 10 MB. |
### ✅ Success Response
```json
{
    "data": {
        "interaction_id": 400001,
        "ticket": {
            "id": 100001,
            "user_id": 200001,
            "parent_id": 300001
        }
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه ticket id الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "ticket_id": [
                "تکمیل گزینه ticket id الزامی است"
            ],
            "description": [
                "تکمیل گزینه description الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/ticket/interaction' \
--header 'Content-Type: multipart/form-data' \
--header 'Authorization: Your Apikey/Token' \
--form 'ticket_id="100001"' \
--form 'description="Sample reply"' \
--form 'file=@"/path/to/your/file.zip"'
```

# Draft
With this module, you can manage your default (pre-written) messages. Fun fact: the previous developers named this section “draft” by mistake, but it’s actually for default messages! To avoid confusing our loyal API users, we decided not to change the name in this version. So go ahead—enjoy managing your default messages under the delightfully misleading name “draft”!

## Create Draft Group
This API allows you to create a new draft group.
⚠️ Important: You can create a maximum of 20 draft groups. If you try to create more, you will receive an error.
### 📍 Endpoint
POST {base_url}/api/user/draft/group
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  | application/json |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "title":"عنوان گروه پیش‌نویس"
}
```
### Request Parameters
| Key          | Type     | Description                                                                   |
|--------------|----------|-------------------------------------------------------------------------------|
| `title`      | `string` | Required, The title of the draft group. The maximum length is 200 characters. |

### ✅ Success Response
```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه title الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "title": [
                "تکمیل گزینه title الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/user/draft/group' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data-raw '{
    "title": "عنوان گروه پیش‌نویس"
}'
```
## List Draft Groups
This API allows you to list all draft groups under your account.
### 📍 Endpoint
GET {base_url}/api/user/draft/group/list
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### ✅ Success Response
```json
{
    "data": [
        {
            "title": "Sample Draft",
            "draft_group_id": 10001,
            "user_id": 20001,
            "time": 1700000000
        },
        {
            "title": "Sample Draft",
            "draft_group_id": 10002,
            "user_id": 20001,
            "time": 1700001000
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "per_page": 10,
        "to": 2,
        "total": 2,
        "status": true,
        "message": "Success",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/user/draft/group/list' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```
## Create Draft
This API allows you to create a new draft message under a specific draft group.
⚠️ Important: You can create a maximum of 200 drafts. If you try to create more, you will receive an error.
### 📍 Endpoint
POST {base_url}/api/user/draft
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  | application/json |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "draft_group_id":123456,
    "message":"تست پیام پیشفرض"
}
```
### Request Parameters
| Key          | Type     | Description                                                                        |
|--------------|----------|------------------------------------------------------------------------------------|
| `draft_group_id` | `integer` | Required, The ID of the draft group under which you want to create the draft.      |
| `message`    | `string` | Required, The content of the draft message. The maximum length is 1400 characters. |
### ✅ Success Response
```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_parameters": [],
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه draft group id الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "draft_group_id": [
                "تکمیل گزینه draft group id الزامی است"
            ],
            "message": [
                "تکمیل گزینه message الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/user/draft' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data-raw '{
    "draft_group_id": 123456,
    "message": "تست پیام پیشفرض"
}'
```
## List Drafts
This API allows you to list all drafts under a specific draft group.
### 📍 Endpoint
GET {base_url}/api/user/draft/list?draft_group_id={draft_group_id}
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Request Parameters
| Key          | Type     | Description                                                                                     |
|--------------|----------|-------------------------------------------------------------------------------------------------|
| `draft_group_id` | `integer` | **Optional** The ID of the draft group for which you want to list the drafts. If omitted, all drafts will be returned. |
⚠️ Important: To exclude a filter from the query, do not include it at all in the request. Avoid sending it with an empty string or `null` value.

### ✅ Success Response
```json
{
    "data": [
        {
            "draft_group_id": 10001,
            "user_id": 20001,
            "draft_id": 30001,
            "time": 1700000000,
            "message": "Sample default message",
            "type": "normal"
        },
        {
            "draft_group_id": 10001,
            "user_id": 20001,
            "draft_id": 30002,
            "time": 0,
            "message": "Sample default message",
            "type": "normal"
        },
        {
            "draft_group_id": 10002,
            "user_id": 20001,
            "draft_id": 30003,
            "time": 1700001000,
            "message": "Another sample message",
            "type": "normal"
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "per_page": 10,
        "to": 3,
        "total": 3,
        "status": true,
        "message": "Success",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه draft group id الزامی است",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "draft_group_id": [
                "تکمیل گزینه draft group id الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/user/draft/list?draft_group_id=10001' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

# Pattern
With this module, you can manage your patterns. Patterns are predefined templates that can be used to quickly fill in fields in various forms or messages.

## Create Pattern
This API allows you to create a new pattern.
### 📍 Endpoint
POST {base_url}/api/user/pattern
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  | application/json |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "title": "test pattern",
    "description": "پترن تستی",
    "is_share": false,
    "message": "پترن تستی %var% . کد شما %code%",
    "website": "https://yoursite.com",
    "variable": [
        {
            "name": "var",
            "type": "string"
        },
        {
            "name": "code",
            "type": "integer"
        }
    ]
}
```
### Request Parameters
| Key          | Type     | Description                                                                                                                                       |
|--------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| `title`      | `string` | Optional, The title of the pattern. The maximum length is 200 characters.                                                                         |
| `description` | `string` | Required, The description of the pattern. The maximum length is 500 characters.                                                                   |
| `is_share`   | `boolean`| Required, If set to `true`, the pattern will be shared with suset users of reseller                                                               |
| `message`    | `string` | Required, The content of the pattern message.                                                                                                     |
| `website`    | `string` | Optional, The website URL associated with the pattern.  |
| `variable`   | `array`  | Required, An array of variables used in the pattern message. Each variable should have a `name` and a `type`. The maximum number of variables is 30. |
| `name`       | `string` | Required, The name of the variable. The maximum length is 50 characters.                                                                           |
| `type`       | `string` | Required, The type of the variable. Can be one of `string`, `integer`.                                                                    |

### ✅ Success Response
```json
{
    "data": {
        "id": "683c0ef4ad9979cd75066974",
        "title": "test pattern",
        "username": "username",
        "pattern_code": "jhaskdab45s6f4sfw",
        "pattern_message": "پترن تستی %var% . کد شما %code%",
        "admin_comment": null,
        "pattern_description": "پترن تستی",
        "pattern_status": "pending",
        "pattern_is_share": false,
        "reject_text": "",
        "type": "sms",
        "variable": [
            {
                "name": "var",
                "type": "string",
                "len": 40
            },
            {
                "name": "code",
                "type": "integer",
                "len": 40
            }
        ],
        "delimiter": "%",
        "updated_at": "2025-06-01T08:27:32.244000Z",
        "time": 1748766452,
        "pattern_state_revision": null,
        "pattern_message_revision": null,
        "pattern_is_share_revision": null,
        "pattern_description_revision": null,
        "pattern_delimiter_revision": null,
        "pattern_state_log": null,
        "pattern_message_log": null,
        "pattern_is_share_log": null,
        "pattern_description_log": null,
        "pattern_delimiter_log": null
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه description الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "description": [
                "تکمیل گزینه description الزامی است"
            ],
            "message": [
                "تکمیل گزینه message الزامی است"
            ],
            "variable.0.name": [
                "تکمیل گزینه variable.0.name الزامی است"
            ],
            "variable.0.type": [
                "تکمیل گزینه variable.0.type الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/patterns/normal' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data-raw '{
    "title": "test pattern",
    "description": "پترن تستی",
    "is_share": false,
    "message": "پترن تستی %var% . کد شما %code%",
    "variable": [
        {
            "name": "var",
            "type": "string"
        },
        {
            "name": "code",
            "type": "integer"
        }
    ]
}'
```

## List Patterns
This API allows you to list all patterns under your account.
### 📍 Endpoint
GET {base_url}/api/patterns
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Request Parameters
| Key          | Type     | Description                                                                                                                                                                 |
|--------------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `filter[code]`       | `string` | Optional, The code of the pattern you want to filter by. If omitted, all patterns will be returned.                                                                         |
| `filter[title]`      | `string` | Optional, The title of the pattern you want to filter by. If omitted, all patterns will be returned.                                                                        |
| `filter[is_share]`   | `boolean`| Optional, If set to `true`, only shared patterns will be returned. If set to `false`, only non-shared patterns will be returned. If omitted, all patterns will be returned. |
| `filter[state]`     | `string` | Optional, The state of the pattern you want to filter by. Can be one of `active`, `inactive`. If omitted, all patterns will be returned.                                    |
| `filter[type]`      | `string` | Optional, The type of the pattern you want to filter by. Can be one of `normal`, `systemic`. If omitted, all patterns will be returned.                                        |
⚠️ Important: To exclude a filter from the query, do not include it at all in the request. Avoid sending it with an empty string or `null` value.
### ✅ Success Response
```json
{
    "data": [
        {
            "id": "67b1b80sdf55sff8f3d069472",
            "partner_id": null,
            "verifier_user_id": null,
            "verifier_partner_id": null,
            "title": null,
            "username": "user",
            "user_id": "1234",
            "pattern_code": "zcxxc465465zxc",
            "pattern_message": "خوش امدید: کد تایید شما %code%",
            "admin_comment": "لطفا نام مجموعه را در متن پترن درج نمایید تا گیرنده متوجه مرجع پیام باشد.\nلطفا آدرس سایت را در متن یا توضیحات پترن درج نمایید تا پترن قابل بررسی باشد.\n",
            "pattern_description": "description",
            "website": null,
            "pattern_status": "inactive",
            "pattern_status_fa": "رد شده",
            "pattern_status_id": 2,
            "pattern_is_share": false,
            "reject_text": "",
            "type": "sms",
            "variable": [
                {
                    "name": "code",
                    "type": "string",
                    "len": 20
                }
            ],
            "delimiter": "%",
            "updated_at": "2025-02-16T10:04:03.237000Z",
            "time": 1739700243,
            "pattern_type": "normal",
            "readonly": false,
            "pattern_state_revision": null,
            "pattern_message_revision": null,
            "pattern_is_share_revision": null,
            "pattern_description_revision": null,
            "pattern_delimiter_revision": null,
            "pattern_variable_revision": null,
            "pattern_type_revision": "",
            "pattern_state_log": null,
            "pattern_message_log": null,
            "pattern_is_share_log": null,
            "pattern_description_log": null,
            "pattern_delimiter_log": null,
            "pattern_variable_log": null,
            "pattern_type_log": null,
            "revision": {
                "type": "",
                "variable": null,
                "pattern_status_id": null,
                "pattern_status_fa": null,
                "pattern_message": null,
                "pattern_description": null,
                "pattern_is_share": null,
                "delimiter": null
            },
            "pattern_log": null
        },
        {
            "id": "67728abasdasda4554c04a562",
            "partner_id": null,
            "verifier_user_id": null,
            "verifier_partner_id": null,
            "title": null,
            "username": "user",
            "user_id": "1234",
            "pattern_code": "aibg4oasdasd4545tj5ht",
            "pattern_message": "پترن تست دستگاه ثبت شماره\r\n%number%",
            "admin_comment": "متن پترن مورد تائید است.",
            "pattern_description": "description",
            "website": null,
            "pattern_status": "active",
            "pattern_status_fa": "فعال",
            "pattern_status_id": 1,
            "pattern_is_share": false,
            "reject_text": "",
            "type": "sms",
            "variable": [
                {
                    "name": "number",
                    "type": "string",
                    "len": 20
                }
            ],
            "delimiter": "%",
            "updated_at": "2024-12-30T11:59:35.103000Z",
            "time": 1735559975,
            "pattern_type": "normal",
            "readonly": false,
            "pattern_state_revision": null,
            "pattern_message_revision": null,
            "pattern_is_share_revision": null,
            "pattern_description_revision": null,
            "pattern_delimiter_revision": null,
            "pattern_variable_revision": null,
            "pattern_type_revision": "",
            "pattern_state_log": null,
            "pattern_message_log": null,
            "pattern_is_share_log": null,
            "pattern_description_log": null,
            "pattern_delimiter_log": null,
            "pattern_variable_log": null,
            "pattern_type_log": null,
            "revision": {
                "type": "",
                "variable": null,
                "pattern_status_id": null,
                "pattern_status_fa": null,
                "pattern_message": null,
                "pattern_description": null,
                "pattern_is_share": null,
                "delimiter": null
            },
            "pattern_log": null
        },
        {
            "id": "673717dfgdfg654c0f5602",
            "partner_id": null,
            "verifier_user_id": null,
            "verifier_partner_id": null,
            "title": null,
            "username": "user",
            "user_id": "1234",
            "pattern_code": "8tx1asdf1q436n",
            "pattern_message": "با سلام\r\nکد فعالسازی شما %code%",
            "admin_comment": "متن پترن مورد تائید است.",
            "pattern_description": "description",
            "website": null,
            "pattern_status": "active",
            "pattern_status_fa": "فعال",
            "pattern_status_id": 1,
            "pattern_is_share": false,
            "reject_text": "",
            "type": "sms",
            "variable": [
                {
                    "name": "code",
                    "type": "integer",
                    "len": 0
                }
            ],
            "delimiter": "%",
            "updated_at": "2024-11-15T09:43:28.117000Z",
            "time": 1731663808,
            "pattern_type": "normal",
            "readonly": false,
            "pattern_state_revision": null,
            "pattern_message_revision": null,
            "pattern_is_share_revision": null,
            "pattern_description_revision": null,
            "pattern_delimiter_revision": null,
            "pattern_variable_revision": null,
            "pattern_type_revision": "",
            "pattern_state_log": null,
            "pattern_message_log": null,
            "pattern_is_share_log": null,
            "pattern_description_log": null,
            "pattern_delimiter_log": null,
            "pattern_variable_log": null,
            "pattern_type_log": null,
            "revision": {
                "type": "",
                "variable": null,
                "pattern_status_id": null,
                "pattern_status_fa": null,
                "pattern_message": null,
                "pattern_description": null,
                "pattern_is_share": null,
                "delimiter": null
            },
            "pattern_log": null
        }
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "per_page": 10,
        "to": 3,
        "total": 3,
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Validation Error (422)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "تکمیل گزینه code الزامی است (و 1 خطای دیگر)",
        "message_parameters": [],
        "message_code": "400-2",
        "errors": {
            "code": [
                "تکمیل گزینه code الزامی است"
            ],
            "title": [
                "تکمیل گزینه title الزامی است"
            ]
        }
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/patterns' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

## Get Pattern By Code
This API allows you to retrieve a specific pattern by its code.

### 📍 Endpoint
GET {base_url}/api/patterns/{pattern_code}

### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Request Parameters
| Key          | Type     | Description                                                                                   |
|--------------|----------|-----------------------------------------------------------------------------------------------|
| `pattern_code` | `string` | Required, The code of the pattern you want to retrieve |

### ✅ Success Response
```json
{
    "data": {
        "id": "67728ab9asdasd4c04a562",
        "partner_id": null,
        "verifier_user_id": null,
        "verifier_partner_id": null,
        "title": null,
        "username": "user",
        "user_id": "1234",
        "pattern_code": "aibg4dsfertj5ht",
        "pattern_message": "پترن تست دستگاه ثبت شماره\r\n%number%",
        "admin_comment": "متن پترن مورد تائید است.",
        "pattern_description": "description",
        "website": null,
        "pattern_status": "active",
        "pattern_status_fa": "فعال",
        "pattern_status_id": 1,
        "pattern_is_share": false,
        "reject_text": "",
        "type": "sms",
        "variable": [
            {
                "name": "number",
                "type": "string",
                "len": 20
            }
        ],
        "delimiter": "%",
        "updated_at": "2024-12-30T11:59:35.103000Z",
        "time": 1735559975,
        "pattern_type": "normal",
        "readonly": false,
        "pattern_state_revision": null,
        "pattern_message_revision": null,
        "pattern_is_share_revision": null,
        "pattern_description_revision": null,
        "pattern_delimiter_revision": null,
        "pattern_variable_revision": null,
        "pattern_type_revision": "",
        "pattern_state_log": null,
        "pattern_message_log": null,
        "pattern_is_share_log": null,
        "pattern_description_log": null,
        "pattern_delimiter_log": null,
        "pattern_variable_log": null,
        "pattern_type_log": null,
        "revision": {
            "type": "",
            "variable": null,
            "pattern_status_id": null,
            "pattern_status_fa": null,
            "pattern_message": null,
            "pattern_description": null,
            "pattern_is_share": null,
            "delimiter": null
        },
        "pattern_log": null
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```

### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```

### 🧪 Example using curl
```
curl --location '{base_url}/api/patterns/aibg4dsfertj5ht' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```

## Update Pattern
This API allows you to update an existing pattern.

### 📍 Endpoint
PUT {base_url}/api/patterns/normal/{pattern_code}
### 🧾 Headers
| Key           | Value                |
|---------------|----------------------|
| Content-Type  | application/json |
| Authorization | your-token           |
### 📤 Request Body
```json
{
    "title": "Updated Pattern",
    "description": "Updated description",
    "is_share": true,
    "message": "Updated message with %var%",
    "website": "https://updatedsite.com",
    "variable": [
        {
            "name": "var",
            "type": "string"
        }
    ]
}
```
### Request Parameters
| Key          | Type     | Description                                                                                                                                       |
|--------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| `title`      | `string` | Optional, The title of the pattern. The maximum length is 200 characters.                                                                         |
| `description` | `string` | Required, The description of the pattern. The maximum length is 500 characters.                                                                   |
| `is_share`   | `boolean`| Required, If set to `true`, the pattern will be shared with suset users of reseller                                                               |
| `message`    | `string` | Required, The content of the pattern message.                                                                                                     |
| `website`    | `string` | Optional, The website URL associated with the pattern.  |
| `variable`   | `array`  | Required, An array of variables used in the pattern message. Each variable should have a `name` and a `type`. The maximum number of variables is 30. |
| `name`       | `string` | Required, The name of the variable. The maximum length is 50 characters.                                                                           |
| `type`       | `string` | Required, The type of the variable. Can be one of `string`, `integer`.                                                                    |
### ✅ Success Response
```json
{
    "data": {
        "id": "67b1b80sdf55sff8f3d069472",
        "title": "Updated Pattern",
        "username": "user",
        "pattern_code": "zcxxc465465zxc",
        "pattern_message": "Updated message with %var%",
        "admin_comment": null,
        "pattern_description": "Updated description",
        "pattern_status": "pending",
        "pattern_is_share": true,
        "reject_text": "",
        "type": "sms",
        "variable": [
            {
                "name": "var",
                "type": "string",
                "len": 40
            }
        ],
        "delimiter": "%",
        "updated_at": "2025-06-01T08:27:32.244000Z",
        "time": 1748766452,
        "pattern_state_revision": null,
        "pattern_message_revision": null,
        "pattern_is_share_revision": null,
        "pattern_description_revision": null,
        "pattern_delimiter_revision": null,
        "pattern_state_log": null,
        "pattern_message_log": null,
        "pattern_is_share_log": null,
        "pattern_description_log": null,
        "pattern_delimiter_log": null
    },
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location '{base_url}/api/patterns/normal/zcxxc465465zxc' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' \
--data-raw '{
    "title": "Updated Pattern",
    "description": "Updated description",
    "is_share": true,
    "message": "Updated message with %var%",
    "variable": [
        {
            "name": "var",
            "type": "string"
        }
    ]
}'
```

## Delete Pattern
This API allows you to delete an existing pattern by its code.

### 📍 Endpoint
DELETE {base_url}/api/patterns/normal/{pattern_code}
### 🧾 Headers
| Key           | Value            |
|---------------|------------------|
| Content-Type  | application/json |
| Authorization | your-token       |
### Request Parameters
| Key          | Type     | Description                                                                                   |
|--------------|----------|-----------------------------------------------------------------------------------------------|
| `pattern_code` | `string` | Required, The code of the pattern you want to delete. |
### ✅ Success Response
```json
{
    "data": null,
    "meta": {
        "status": true,
        "message": "انجام شد",
        "message_code": "200-1"
    }
}
```
### ❌ Error Response — Invalid or Expired Token (401)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "اطلاعات وارد شده صحیح نمی باشد",
        "message_parameters": [],
        "message_code": "400-1",
        "errors": {}
    }
}
```
### ❌ Error Response — Pattern Not Found (404)
```json
{
    "data": null,
    "meta": {
        "status": false,
        "message": "پترن مورد نظر یافت نشد",
        "message_parameters": [],
        "message_code": "404-1",
        "errors": {}
    }
}
```
### 🧪 Example using curl
```
curl --location --request DELETE '{base_url}/api/patterns/normal/zcxxc465465zxc' \
--header 'Content-Type: application/json' \
--header 'Authorization: Your Apikey/Token' 
```
