# دریافت تعداد گیرندگان

این API به شما امکان دریافت تعداد گیرندگان بر اساس فیلترهای مختلف مانند سال تولد، استان، شهرستان، شهر را می‌دهد.

## 📍 لینک دسترسی

```
GET {base_url}/api/send/banks/counts
```

## 🧾 هدرهای درخواست

| کلید          | مقدار               |
|---------------|---------------------|
| Authorization | توکن یا کلید دسترسی |
| Content-Type  | application/json    |

## 📝 پارامترهای درخواست

| پارامتر         | نوع     | ضروری | توضیحات                                                                             |
|-----------------|---------|-------|-------------------------------------------------------------------------------------|
| birth_year_from | integer | خیر   | حداقل سال تولد گیرندگان (پیش‌فرض: 1300)                                             |
| birth_year_to   | integer | خیر   | حداکثر سال تولد گیرندگان (پیش‌فرض: 1410)                                            |
| province_id     | integer | بله   | شناسه استان برای فیلتر کردن گیرندگان(قابل بازیابی از [لیست استان ها](./province))   |
| county_id       | integer | بله   | شناسه شهرستان برای فیلتر کردن گیرندگان(قابل بازیابی از [لیست شهرستان ها](./county)) |
| city_id         | integer | بله   | شناسه شهر برای فیلتر کردن گیرندگان(قابل بازیابی از [لیست شهرها](./city))            |
| gender_id       | integer | خیر   | شناسه جنسیت برای فیلتر کردن گیرندگان (1 برای مرد، 2 برای زن)                        |
| number_prefix   | string  | خیر   | پیش‌شماره ای که میخواهید ارسال شما فقط به آن پیش شماره انجام شود                    |

## ✅ پاسخ موفق

```json
{
  "data": {
    "mci_count": 256171,
    "irancell_count": 134380,
    "other_count": 10425
  },
  "meta": {
    "status": true,
    "message": "count",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

### توضیح فیلدهای پاسخ

| فیلد           | توضیحات                      |
|----------------|------------------------------|
| mci_count      | تعداد مشترکین همراه اول      |
| irancell_count | تعداد مشترکین ایرانسل        |
| other_count    | تعداد مشترکین سایر اپراتورها |

## 📝 نکات

- این API برای برآورد تعداد گیرندگان قبل از ارسال پیام مفید است.
- پارامترهای `province_id`، `county_id` و `city_id` اجباری هستند.
- می‌توانید با تنظیم محدوده سال تولد، گیرندگان را بر اساس سن فیلتر کنید.
- نتایج بر اساس اپراتور تلفن همراه تفکیک شده‌اند.

## ❌ پاسخ خطا — توکن نامعتبر یا منقضی شده (401)

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

## ❌ پاسخ خطا — پارامترهای اجباری موجود نیست (422)

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "پارامترهای مورد نیاز ارسال نشده است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "province_id": [
        "انتخاب استان اجباری است"
      ]
    }
  }
}
```

## 🧪 نمونه درخواست

```bash
curl --location '{base_url}/api/send/banks/counts?province_id=89&county_id=147&city_id=12&gender_id=1&birth_year_from=1360&birth_year_to=1380' \
--header 'Authorization: API TOKEN'
```
