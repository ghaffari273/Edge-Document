# ارسال پیامک وب سرویس

از این متد برای ارسال یک پیام به چندین گیرنده استفاده میشود. این متد معمولا برای ارسال به حداکثر 1000 گیرنده مورد
استفاده قرار میگیرد، در صورتی که میخواهید به بیش از 1000 گیرنده پیام خود را ارسال نمایید از [ارسال فایل](./file) استفاده
نموده و یا ارسال خود را در چند درخواست ارسال نمایید.

## 📍 لینک دسترسی

```
POST {base_url}/api/send
```

## 🧾 هدرهای درخواست

| کلید          | مقدار               |
|---------------|---------------------|
| Authorization | توکن یا کلید دسترسی |
| Content-Type  | application/json    |

## 📤 بدنه درخواست

```json
{
  "sending_type": "webservice",
  "from_number": "+983000505",
  "message": "متن پیام",
  "params": {
    "recipients": [
      "+989120000000",
      "+989350000000"
    ]
  },
  "send_time": "2025-03-12 21:20:02"
}
```

## 📝 پارامترها

| پارامتر      | نوع    | ضروری | توضیحات                                                                              |
|--------------|--------|-------|--------------------------------------------------------------------------------------|
| sending_type | رشته   | بله   | نوع ارسال، باید "webservice" باشد                                                    |
| from_number  | رشته   | بله   | شماره فرستنده در فرمت E.164 (مثال: +983000505)                                       |
| message      | رشته   | بله   | متن پیامی که میخواهید ارسال نمایید. این متن نباید بیش از 1400 کارکتر یا 20 پارت باشد |
| params       | object | بله   | پارامترهای ارسال پیام، که در این نوع ارسال شامل گیرندگان پیام می باشد                |
| recipients   | array  | بله   | لیست شماره تلفن گیرندگان در فرمت E.164 (مثال: +989120000000)                         |
| send_time    | رشته   | خیر   | زمان مورد نظر برای ارسال پیام در فرمت YYYY-MM-DD HH:MM:SS. منطقه زمانی UTC است.      |

## 📝 نکات مهم

- `from_number` باید سرشماره معتبری باشد که به حساب کاربری شما اختصاص یافته است.
- آرایه `recipients` باید شامل شماره تلفن‌های معتبر در فرمت E.164 باشد.
- `send_time` اختیاری است؛ اگر وارد نشود، پیام فوراً ارسال خواهد شد و در صورتی که وارد شود پیام شما در زمانی که مشخص
  کرده اید ارسال میگردد.

## ✅ پاسخ موفق

```json
{
  "data": {
    "message_outbox_ids": [
      1123544244
    ]
  },
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

## ❌ پاسخ خطا — توکن یا کلید دسترسی نامعتبر یا منقضی شده (401)

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

## ❌ پاسخ خطا — درخواست نامعتبر (422)

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "تکمیل گزینه پیام الزامی است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "message": [
        "تکمیل گزینه پیام الزامی است"
      ]
    }
  }
}
```

## 🧪 نمونه درخواست

```bash
curl --location '{base_url}/api/send' \
--header 'Content-Type: application/json' \
--header 'Authorization: Token|ApiKey' \
--data '{
    "sending_type": "webservice",
    "from_number": "+983000505",
    "message": "متن پیام",
    "params": {
        "recipients": [
            "+989120000000",
            "+989350000000"
        ]
    },
    "send_time": "2025-03-12 21:20:02"
}'
```
