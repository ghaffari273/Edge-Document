# فراموشی رمز عبور

در این مرحله توضیح خواهیم داد که کاربر در صورتی که رمز عبور حساب کاربری خودش رو فراموش کرده، چطور میتونه اون رو تغییر
بده.

## درخواست رمز یکبار مصرف برای تغییر رمزعبور

با فراخوانی این API یک رمز عبور یکبار مصرف برای کاربر ارسال میشه تا با اون بتونه ادامه مراحل تغییر رمزعبور رو پیش ببره.

فراموش نکنید که این رمزیکبار مصرف فقط 2 دقیقه اعتبار داره

### 📍 لینک دسترسی

```
POST {base_url}/api/acl/auth/forgot_password
```

### 🧾 هدر درخواست

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 بدنه درخواست

```json
{
  "username": "نام کاربری",
  "mobile": "شماره موبایل"
}
```

## 📝 پارامترهای درخواست

| پارامتر  | نوع  | توضیحات                                             |
|----------|------|-----------------------------------------------------|
| username | رشته | نام کاربری جهت بازنشانی رمز عبور                    |
| mobile   | رشته | شماره موبایل ثبت شده برای همین نام کاربری در سامانه |

### ✅ خروجی API در صورت موفقیت آمیز بودن

```json
{
  "data": {
    "token": "6b1059f512b4fe9acd8bdb22351b0b51"
  },
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

در صورت موفقیت آمیز بودن درخواست، یک پیامک حاوی رمز یکبار مصرف جهت تغییر رمز عبور به شماره موبایل کاربر ارسال میگردد که
کاربر باید در مراحل بعدی جهت تغییر رمز از آن استفاده نماید.

لازم به ذکر است توکن دریافت شده از این مرحله و همچنین رمزیکبار مصرف پیامک شده صرفا 2 دقیقه اعتبار خواهند داشت و پس از آن
منقضی خواهند شد.

### ❌ خروجی در صورت عدم تطابق نام کاربری و شماره موبایل و یا پیدا نشدن نام کاربری و یا شماره موبایل

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

### ❌ نمونه خطای اشتباه و یا تکمیل نبودن بدنه درخواست

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "تکمیل گزینه نام کاربری الزامی است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "username": [
        "تکمیل گزینه نام کاربری الزامی است"
      ]
    }
  }
}
```

## 🧪 نمونه درخواست

```bash
curl --location '{base_url}/api/acl/auth/forgot_password' \
--header 'Content-Type: application/json' \
--data '{
    "username":"your-username",
    "mobile":"your-mobile-number"
}'
```

## تغییر رمزعبور با استفاده از توکن دریافتی

در صورتی که مرحله قبل با موفقیت طی گردد، یک توکن جهت ادامه عملیات صادر خواهد شد، شما میتوانید با استفاده از آن توکن
اقدام به تغییر رمز عبور حساب کاربری نمایید

توجه داشته باشید که توکن دریافتی فقط تا 2 دقیقه معتبر بوده و سپس منقضی خواهد شد

### 📍 لینک دسترسی

```
POST {base_url}/api/acl/auth/change_password_by_token
```

### 🧾 هدر درخواست

| Key          | Value            |
|--------------|------------------|
| Content-Type | application/json |

### 📤 بدنه درخواست

```json
{
  "token": "توکن",
  "otp": "رمز یکبار مصرف",
  "password": "رمزعبور جدید"
}
```

### 📝 پارامترهای درخواست

| پارامتر  | نوع  | توضیحات                                    |
|----------|------|--------------------------------------------|
| token    | رشته | توکن دریافت شده از مرحله قبل               |
| otp      | رشته | رمز یکبار مصرف که برای کاربر پیامک شده است |
| password | رشته | رمز عبور جدید                              |

### ✅ خروجی API در صورت موفقیت آمیز بودن

```json
{
  "data": null,
  "meta": {
    "status": true,
    "message": "انجام شد",
    "message_parameters": [],
    "message_code": "200-1"
  }
}
```

### ❌ نمونه خطای اشتباه بودن و یا انقضای توکن

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "اطلاعات وارد شده صحیح نمی باشد",
    "message_parameters": [],
    "message_code": "400-1",
    "errors": {}
  }
}
```

### ❌ نمونه خطای اشتباه و یا تکمیل نبودن بدنه درخواست

```json
{
  "data": null,
  "meta": {
    "status": false,
    "message": "تکمیل گزینه گذرواژه الزامی است",
    "message_parameters": [],
    "message_code": "400-2",
    "errors": {
      "password": [
        "تکمیل گزینه گذرواژه الزامی است"
      ]
    }
  }
}
```

### 🧪 نمونه درخواست

```bash
curl --location '{base_url}/api/acl/auth/change_password_by_token' \
--header 'Content-Type: application/json' \
--data '{
    "token":"token-from-forgot-password",
    "otp":"otp-code",
    "password":"new-password"
}'
```
